{% extends 'core/base.html' %}
{% load static %}

{% block content %}

<style>
        /* Welcome Screen Styles */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a1f44, #1a3a8f);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            overflow: hidden;
        }
        
        .welcome-graphic {
            width: min(80%, 600px);
            opacity: 0;
            transform: scale(0.8);
            animation: graphicEntrance 1.2s cubic-bezier(0.22, 1, 0.36, 1) 0.3s forwards;
        }
        
        .additional-text {
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin-top: 20px;
            opacity: 0;
            transform: translateY(20px);
            animation: textFadeIn 0.8s ease-out 1s forwards;
        }
        
        .shutter {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            transform: translateY(100%);
            z-index: 1001;
        }
        
        /* Main Content */
        #main-content {
            display: none; /* Will be shown after animation */
        }
        
        /* Animations */
        @keyframes graphicEntrance {
            0% { opacity: 0; transform: scale(0.8) rotate(-5deg); }
            100% { opacity: 1; transform: scale(1) rotate(0); }
        }
        
        @keyframes textFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shutterOpen {
            from { transform: translateY(0); }
            to { transform: translateY(-100%); }
        }
    </style>

<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="shutter" id="shutter"></div>
        <!-- Your Canva Export -->
        <img src="{% static 'images/iei_logo_main.png' %}" alt="Welcome to IEI Student Chapter" class="welcome-graphic">
        
        <!-- Additional Animated Text (can be in Canva or separate) -->
        <div class="additional-text">
            <p>Presented by</p>
            <p>Department of Information Technology</p>
            <p>RCCIIT, Kolkata</p>
        </div>
    </div>
<div id="main-content">
<!-- Hero Section with Parallax Effect -->
<section class="hero-section position-relative overflow-hidden">
  <div class="parallax-bg"></div>
  <div class="container position-relative z-index-1 text-center py-10">
    <div class="animate__animated animate__fadeInDown">
      <img src="{% static 'images/iei_logo_main.png' %}" alt="IEI Logo" class="mb-4" style="height: 100px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));">
    </div>
    <h1 class="display-3 fw-bold text-white mb-3 animate__animated animate__fadeIn animate__delay-1s">Institute of Engineers India Student Chapter</h1>
    <p class="lead text-white-80 mb-5 animate__animated animate__fadeIn animate__delay-1s">RCC Institute of Information Technology</p>
    <a href="{% url 'events' %}" class="btn btn-primary btn-lg px-5 py-3 animate__animated animate__fadeInUp animate__delay-2s">
      Explore Events <i class="bi bi-arrow-right ms-2"></i>
    </a>
  </div>
</section>

<!-- Upcoming Events Section -->
<section class="py-7 bg-white position-relative overflow-hidden">
  <div class="container position-relative z-index-1">
    <div class="text-center mb-7">
      <h2 class="display-5 fw-bold mb-3 animate__animated animate__fadeIn">Upcoming Events</h2>
      <div class="divider mx-auto bg-primary mb-4 animate__animated animate__fadeIn"></div>
    </div>
    
    <div class="row g-4 event-grid">
      {% for event in upcoming_events %}
      <div class="col-md-4 animate__animated animate__fadeInUp">
        <div class="card h-100 border-0 shadow-sm overflow-hidden transition-all">
          <div class="card-img-container overflow-hidden">
            <img src="{{ event.thumbnail.url }}" 
                 class="card-img-top transition-all" 
                 alt="{{ event.title }}"
                 loading="lazy">
          </div>
          <div class="card-body p-4">
            <span class="badge bg-primary mb-2">{{ event.get_event_type_display }}</span>
            <h5 class="card-title fw-bold mb-2">{{ event.title }}</h5>
            <p class="text-muted mb-3">
              <i class="bi bi-calendar-event me-2"></i> {{ event.date|date:"M d, Y" }}
              <br>
              <i class="bi bi-clock me-2"></i> {{ event.date|time:"g:i A" }}
            </p>
            <a href="{% url 'event_detail' event.id %}" class="btn btn-outline-primary stretched-link">
              View Details <i class="bi bi-arrow-right-short"></i>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center py-5">
        <div class="animate__animated animate__fadeIn">
          <i class="bi bi-calendar-x text-muted" style="font-size: 3rem;"></i>
          <h4 class="mt-3">No Upcoming Events</h4>
          <p class="text-muted">Check back later for our next events</p>
        </div>
      </div>
      {% endfor %}
    </div>
    
    {% if upcoming_events %}
    <div class="text-center mt-5 animate__animated animate__fadeIn">
      <a href="{% url 'events' %}" class="btn btn-outline-primary px-4">
        View All Events <i class="bi bi-arrow-right ms-2"></i>
      </a>
    </div>
    {% endif %}
  </div>
</section>
</div>
</body>


<style>
  /* Custom CSS for professional transitions */
  .hero-section {
    background: linear-gradient(135deg, #0056b3 0%, #003366 100%);
    color: white;
    padding: 8rem 0;
    position: relative;
  }
  
  .parallax-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('{% static "images/tech-pattern.png" %}');
    background-size: cover;
    background-position: center;
    opacity: 0.1;
  }
  
  .divider {
    width: 80px;
    height: 4px;
    background: #0056b3;
  }
  
  .transition-all {
    transition: all 0.4s ease;
  }
  
  .card {
    border-radius: 12px;
    overflow: hidden;
    border: none;
  }
  
  .card-img-container {
    height: 200px;
    overflow: hidden;
  }
  
  .card-img-top {
    height: 100%;
    width: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.1);
  }
  
  .card:hover .card-img-top {
    transform: scale(1.05);
  }
  
  .stretched-link::after {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    content: "";
  }
  
  /* Animation delays */
  .animate__delay-3s {
    animation-delay: 0.3s;
  }
  
  .animate__delay-4s {
    animation-delay: 0.6s;
  }
</style>

<script>
  // Intersection Observer for scroll animations
  document.addEventListener('DOMContentLoaded', function() {
    const animateElements = document.querySelectorAll('.animate__animated');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add(entry.target.dataset.animation);
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    
    animateElements.forEach(el => {
      observer.observe(el);
    });
  });
</script>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            // Only show animation on first visit
            if (!sessionStorage.getItem('visited')) {
                sessionStorage.setItem('visited', 'true');
                
                setTimeout(function() {
                    // Start shutter animation
                    document.getElementById('shutter').style.animation = 'shutterOpen 1.2s cubic-bezier(0.65, 0, 0.35, 1) forwards';
                    
                    // After shutter animation completes
                    setTimeout(function() {
                        document.getElementById('welcomeScreen').style.display = 'none';
                        document.getElementById('main-content').style.display = 'block';
                    }, 1200);
                    
                }, 3500); // Total welcome screen duration
            } else {
                // Skip animation if already visited
                document.getElementById('welcomeScreen').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
            }
        });
    </script>

{% endblock %}